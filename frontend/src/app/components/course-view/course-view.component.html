<header id="courseViewHeader">
    <h1 class="row justify-content-center">{{ title }}</h1>

    <button type="button" class="btn" [routerLink]="['/course']">
        <i class="fas fa-plus-circle fa-3x"></i>
    </button>
    <hr />
</header>

<div *ngIf="eventList.length == 0">
    <div class="row">
        <div class="col-lg-12">
            <p class="alert alert-info">
                Aktuell sind noch keine Kurse vorhanden!
            </p>
        </div>
    </div>
</div>

<!-- Search Bar -->
<div class="row justify-content-center align-items-center">
    <div *ngIf="role == 'ADMIN'" class="custom-control custom-switch pb-3 mr-3">
        <input
            name="toggler"
            type="checkbox"
            class="custom-control-input"
            id="eventView"
            [(ngModel)]="isPersonalView"
            (input)="changeView()"
        />
        <label class="custom-control-label" for="eventView"
            >Nur eigene Events anzeigen</label
        >
    </div>
    <div class="input-group w-auto mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text" id="basic-addon1"
                ><i class="fas fa-search"></i
            ></span>
        </div>
        <input
            type="text"
            class="form-control"
            placeholder="{{ searchPlaceholder }}"
            [(ngModel)]="filter"
            (keyup)="filterList()"
        />
    </div>
    <div ngbDropdown class="pb-3 mx-2">
        <button
            class="col-auto btn"
            [class.btn-outline-primary]="
                eventTypeSelection === undefined ||
                eventTypeSelection.value === undefined
            "
            [class.btn-primary]="
                eventTypeSelection !== undefined &&
                eventTypeSelection.value !== undefined
            "
            id="eventtypeFilterBtn"
            name="eventtypeFilter"
            ngbDropdownToggle
        >
            {{
                eventTypeSelection === undefined ||
                eventTypeSelection.value === undefined
                    ? 'Eventtyp auswählen'
                    : eventTypeSelection.name
            }}
        </button>
        <div ngbDropdownMenu>
            <button
                class="dropdown-item"
                id="selectedEventtypeBtn"
                name="selectedEventtypeFilter"
                *ngFor="let type of eventTypes"
                (click)="eventTypeSelection = type; filterList()"
            >
                {{ type.name }}
            </button>
        </div>
    </div>
</div>

<div *ngFor="let event of eventListPage">
    <div class="card border-dark mb-2 flex-row flex-wrap">
        <div class="card-header bg-secondary" id="cardLeft">
            Hier kommt ein Bild
        </div>
        <div class="card-block" id="cardMiddle">
            <div class="card-body" id="cardBody">
                <h4 class="card-title" id="cardHeader">
                    {{ event.name }}
                </h4>

                <hr />
                <p clas="card-text" id="cardContent">
                    Max Teilnehmer: {{ event.maxParticipants }}<br />
                    Anmeldefrist: {{ event.endOfApplication }} <br />
                    Kostet: {{ event.price }}
                </p>
            </div>
        </div>
        <div class="card-footer flex-column" id="cardRight">
            <div class="mb-4 mt-2">
                <button
                    type="button"
                    class="btn"
                    (click)="deleteCourse(event.id)"
                >
                    <i class="fas fa-trash fa-3x"></i>
                </button>
            </div>
            <div
                [routerLink]="['/course/add']"
                [queryParams]="{ id: event.id }"
            >
                <button type="button" class="btn">
                    <i class="fas fa-pencil-alt fa-3x"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<ngb-pagination
    class="d-flex justify-content-center"
    [(page)]="currentPage"
    [pageSize]="itemsPerPage"
    [collectionSize]="filteredEventList.length"
    (pageChange)="updateListPage()"
    [maxSize]="5"
    [rotate]="true"
>
    <ng-template ngbPaginationPrevious> Zurück </ng-template>
    <ng-template ngbPaginationNext> Weiter </ng-template>
</ngb-pagination>
<!-- Modal PopUp -->
